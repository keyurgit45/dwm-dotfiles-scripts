#!/bin/bash
MAX_SIZE=50
HISTORY_FILE=~/.clipboard

function main() {
 createHistoryFile
 while true
 do
    clip=$(xclip -o -selection clipboard)
    if [ "$(grep -c "$clip" "$HISTORY_FILE")" = 0 ]; then
        echo "$clip" >> "$HISTORY_FILE"
        nbLines=$(wc -l "$HISTORY_FILE" | cut -d ' ' -f1)
        if [ "$nbLines" -gt "$MAX_SIZE" ]; then
            sed -i '1d' "$HISTORY_FILE"
        fi
     fi
     sleep 1
 done
}

function createHistoryFile() {
    if [ ! -f $HISTORY_FILE ]; then
        touch $HISTORY_FILE
    fi
}
main
